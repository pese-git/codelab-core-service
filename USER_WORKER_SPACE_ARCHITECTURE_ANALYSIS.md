# –ê–Ω–∞–ª–∏–∑: Per-User vs Per-Project –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ User Worker Space

**–î–∞—Ç–∞:** 17 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –í—ã–±–æ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã User Worker Space

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### **Per-User –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û

```
User (user_id=123)
  ‚îî‚îÄ‚îÄ User Worker Space (–æ–¥–∏–Ω –Ω–∞ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
      ‚îú‚îÄ‚îÄ agent_cache (–∫–µ—à–∏—Ä—É—é—Ç—Å—è –∞–≥–µ–Ω—Ç—ã –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
      ‚îÇ   ‚îú‚îÄ‚îÄ Project A: agent_coder, agent_analyzer
      ‚îÇ   ‚îú‚îÄ‚îÄ Project B: agent_coder, agent_tester
      ‚îÇ   ‚îî‚îÄ‚îÄ Project C: agent_writer, agent_designer
      ‚îÇ
      ‚îú‚îÄ‚îÄ Agent Bus (–æ—á–µ—Ä–µ–¥—å –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
      ‚îÇ   ‚îú‚îÄ‚îÄ Task: Project A, agent_coder, "code review"
      ‚îÇ   ‚îú‚îÄ‚îÄ Task: Project B, agent_tester, "run tests"
      ‚îÇ   ‚îî‚îÄ‚îÄ Task: Project C, agent_writer, "write doc"
      ‚îÇ
      ‚îî‚îÄ‚îÄ Qdrant collections (–≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ)
          ‚îú‚îÄ‚îÄ user123_agent_coder_context (Project A)
          ‚îú‚îÄ‚îÄ user123_agent_coder_context (Project B) ‚Üê –ö–û–ù–§–õ–ò–ö–¢!
          ‚îî‚îÄ‚îÄ user123_agent_writer_context (Project C)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** - –º–µ–Ω—å—à–µ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ **–û–±—â–∏–π –∫–µ—à** - –µ—Å–ª–∏ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ agent –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏** - –≤—Å–µ –∞–≥–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå **–£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏** - agent –∏–∑ Project A –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É Project B
- ‚ùå **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º–µ–Ω** - –µ—Å–ª–∏ –≤ Project A –∏ Project B –µ—Å—Ç—å –∞–≥–µ–Ω—Ç —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –∏–º–µ–Ω–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "coder"), –±—É–¥–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤ Qdrant collections
- ‚ùå **–°–º–µ—à–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - agent_cache —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–≥–µ–Ω—Ç–æ–≤ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –±–µ–∑ —è–≤–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
- ‚ùå **–ü—Ä–æ–±–ª–µ–º—ã –∏–∑–æ–ª—è—Ü–∏–∏** - –æ—á–∏—Å—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –º–æ–∂–µ—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –¥—Ä—É–≥–æ–π
- ‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞** - Agent Bus –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ –æ–¥–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏
- ‚ùå **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–æ–≤ –∫–µ—à –±—É–¥–µ—Ç —Ä–∞—Å—Ç–∏ –±–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—è
- ‚ùå **–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** - –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±—É–¥—É—Ç —Å–º–µ—à–∞–Ω—ã –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º:**

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤ Qdrant:**
```
Project A: user123_agent_coder_context ‚Üí –∑–Ω–∞–Ω–∏—è –æ Project A –∫–æ–¥–µ
Project B: user123_agent_coder_context ‚Üí –∑–Ω–∞–Ω–∏—è –æ Project B –∫–æ–¥–µ
‚Üë –û–ù–ò –ö–û–ù–§–õ–ò–ö–¢–£–Æ–¢! –í—Ç–æ—Ä–æ–π –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –ø–µ—Ä–≤—ã–π!
```

2. **–£—Ç–µ—á–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ:**
```
Agent –≤ Project B –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å "search context"
‚Üí –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ Project A (—É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö!)
```

3. **–ù–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –æ—á–∏—Å—Ç–∫–∞:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç Project A
‚Üí Worker Space –æ—á–∏—â–∞–µ—Ç agent_cache
‚Üí Project B —Ç–µ—Ä—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–≥–µ–Ω—Ç–∞—Ö (–æ–Ω–∏ –∑–∞–∫–µ—à–∏—Ä–æ–≤–∞–Ω—ã –≤–º–µ—Å—Ç–µ)
```

---

### **Per-Project –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û

```
User (user_id=123)
  ‚îú‚îÄ‚îÄ Project A (project_id=001)
  ‚îÇ   ‚îî‚îÄ‚îÄ User Worker Space
  ‚îÇ       ‚îú‚îÄ‚îÄ agent_cache_A (—Ç–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç—ã Project A)
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ agent_coder
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ agent_analyzer
  ‚îÇ       ‚îÇ
  ‚îÇ       ‚îú‚îÄ‚îÄ Agent Bus_A (—Ç–æ–ª—å–∫–æ Project A)
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ Task: agent_coder, "code review"
  ‚îÇ       ‚îÇ
  ‚îÇ       ‚îî‚îÄ‚îÄ Qdrant_A
  ‚îÇ           ‚îú‚îÄ‚îÄ user123_project001_agent_coder_context
  ‚îÇ           ‚îî‚îÄ‚îÄ user123_project001_agent_analyzer_context
  ‚îÇ
  ‚îú‚îÄ‚îÄ Project B (project_id=002)
  ‚îÇ   ‚îî‚îÄ‚îÄ User Worker Space
  ‚îÇ       ‚îú‚îÄ‚îÄ agent_cache_B (—Ç–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç—ã Project B)
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ agent_coder
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ agent_tester
  ‚îÇ       ‚îÇ
  ‚îÇ       ‚îú‚îÄ‚îÄ Agent Bus_B (—Ç–æ–ª—å–∫–æ Project B)
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ Task: agent_tester, "run tests"
  ‚îÇ       ‚îÇ
  ‚îÇ       ‚îî‚îÄ‚îÄ Qdrant_B
  ‚îÇ           ‚îú‚îÄ‚îÄ user123_project002_agent_coder_context
  ‚îÇ           ‚îî‚îÄ‚îÄ user123_project002_agent_tester_context
  ‚îÇ
  ‚îî‚îÄ‚îÄ Project C (project_id=003)
      ‚îî‚îÄ‚îÄ User Worker Space
          ‚îú‚îÄ‚îÄ agent_cache_C (—Ç–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç—ã Project C)
          ‚îÇ   ‚îú‚îÄ‚îÄ agent_writer
          ‚îÇ   ‚îî‚îÄ‚îÄ agent_designer
          ‚îÇ
          ‚îú‚îÄ‚îÄ Agent Bus_C (—Ç–æ–ª—å–∫–æ Project C)
          ‚îÇ   ‚îî‚îÄ‚îÄ Task: agent_writer, "write doc"
          ‚îÇ
          ‚îî‚îÄ‚îÄ Qdrant_C
              ‚îú‚îÄ‚îÄ user123_project003_agent_writer_context
              ‚îî‚îÄ‚îÄ user123_project003_agent_designer_context
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è** - –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ A –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ B
- ‚úÖ **–ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏–º–µ–Ω** - –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω–æ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "coder") –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤
- ‚úÖ **–ù–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∫–µ—à** - each project has its own cache, –æ—á–∏—Å—Ç–∫–∞ –æ–¥–Ω–æ–≥–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–π
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞** - Agent Bus –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞—á–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è –æ—á–∏—Å—Ç–∫–∞** - cleanup –ø—Ä–æ–µ–∫—Ç–∞ A –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç B
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - tool –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –¥—Ä—É–≥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–µ—Å—É—Ä—Å—ã –≤—ã–¥–µ–ª—è—é—Ç—Å—è per-project, –º–æ–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã
- ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –º–µ—Ç—Ä–∏–∫–∏ per-project, –ª–µ–≥–∫–æ –≤–∏–¥–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –∫–∞–∂–¥–æ–º –ø—Ä–æ–µ–∫—Ç–µ
- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏** - –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –ª–∏–º–∏—Ç—ã per-project (queue size, cache size, etc)

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤:**

1. **–ß–∏—Å—Ç–∞—è –∏–∑–æ–ª—è—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
```
Project A: user123_project001_agent_coder_context
Project B: user123_project002_agent_coder_context
‚Üë –†–ê–ó–ù–´–ï COLLECTIONS! NO CONFLICT!
```

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–æ–∏—Å–∫–µ:**
```
Agent –≤ Project B –≤—ã–ø–æ–ª–Ω—è–µ—Ç "search context"
‚Üí –ú–æ–∂–µ—Ç –∏—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ Project B collections
‚Üí Project A –¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (–∞–±—Å–æ–ª—é—Ç–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å!)
```

3. **–£–ø—Ä–∞–≤–ª—è–µ–º–∞—è –æ—á–∏—Å—Ç–∫–∞:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∞–µ—Ç Project A
‚Üí Worker Space A –æ—á–∏—â–∞–µ—Ç —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã
‚Üí Project B –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º (–Ω–∏–∫–∞–∫–∏—Ö –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤)
```

---

## üìã –¢–∞–±–ª–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Per-User | Per-Project |
|----------|----------|-------------|
| **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** | ‚ùå –ù–∞—Ä—É—à–µ–Ω–∞ | ‚úÖ –ü–æ–ª–Ω–∞—è |
| **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º–µ–Ω** | ‚ùå –í–æ–∑–º–æ–∂–Ω—ã | ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç |
| **–°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏** | ‚úÖ –ü—Ä–æ—Å—Ç–∞—è | ‚ùå –°–ª–æ–∂–Ω–µ–µ |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–µ—à–µ–º** | ‚ùå –°–º–µ—à–∞–Ω–Ω—ã–π | ‚úÖ –†–∞–∑–¥–µ–ª—å–Ω—ã–π |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | ‚ùå –ù–∏–∑–∫–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è |
| **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚ùå –ü—Ä–æ–±–ª–µ–º—ã | ‚úÖ –•–æ—Ä–æ—à–µ–µ |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏** | ‚ùå –¢—Ä—É–¥–Ω–æ | ‚úÖ –õ–µ–≥–∫–æ |
| **Cleanup** | ‚ùå –†–∏—Å–∫–æ–≤–∞–Ω–Ω—ã–π | ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | ‚ùå –°–º–µ—à–∞–Ω–Ω—ã–π | ‚úÖ –Ø—Å–Ω—ã–π |
| **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |

---

## üéØ –í—ã–≤–æ–¥: Per-Project - —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤—ã–±–æ—Ä

### –ü–æ—á–µ–º—É per-project –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω:

1. **–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç** (clarify-workspace-access)
   - "Worker Space –î–û–õ–ñ–ï–ù –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –¥–ª—è –ö–ê–ñ–î–û–ì–û –ü–†–û–ï–ö–¢–ê"
   - "–ö–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Å–≤–æ–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Worker Space"

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** (critical requirement)
   - –ü–æ–ª–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö
   - Tools –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —á—É–∂–∏–º –ø—Ä–æ–µ–∫—Ç–∞–º

3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞**
   - –ö–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç = –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Ä–∞–±–æ—á–µ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ backend
   - –ê–≥–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–æ–µ–∫—Ç–∞
   - Qdrant collections —É–Ω–∏–∫–∞–ª—å–Ω—ã per-project

4. **–£–ø—Ä–∞–≤–ª—è–µ–º–æ—Å—Ç—å**
   - Cleanup –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
   - Resource limits per-project
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ per-project

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω

### UserWorkerSpaceManager (Singleton)
```python
manager = UserWorkerSpaceManager()

# –ü–æ–ª—É—á–∏—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å Worker Space –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
worker_space = await manager.get_or_create(
    user_id="123",
    project_id="project_001"
)

# –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ = —Ä–∞–∑–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
ws_a = await manager.get_or_create("123", "project_001")
ws_b = await manager.get_or_create("123", "project_002")

# ws_a –∏ ws_b –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã!
assert ws_a.project_id != ws_b.project_id
assert ws_a.agent_cache != ws_b.agent_cache
```

### Dependency Injection –≤ endpoints
```python
@router.post("/my/projects/{project_id}/chat/...")
async def send_message(
    project_id: str,
    user_id: str = Depends(get_user_id),
    worker_space: UserWorkerSpace = Depends(
        lambda uid=Depends(get_user_id): 
            get_user_worker_space(uid, project_id)
    )
):
    # worker_space –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
    return await worker_space.handle_message(...)
```

---

## üìù –ò—Ç–æ–≥–æ–≤–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: PER-PROJECT**

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (clarify-workspace-access)
2. ‚úÖ –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∏–∑–æ–ª—è—Ü–∏—é
3. ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã per-project
4. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–µ–º–∞–Ω—Ç–∏–∫–∞ (–∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç = –æ—Ç–¥–µ–ª—å–Ω–æ–µ workspace)
5. ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è —Ö–æ—Ä–æ—à–æ (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º)
6. ‚úÖ –£–ø—Ä–∞–≤–ª—è–µ–º–∞—è –æ—á–∏—Å—Ç–∫–∞ –±–µ–∑ –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –∫–æ–¥–∞ (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è ProjectID), –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞–º–Ω–æ–≥–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ.
