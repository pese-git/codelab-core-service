# üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [Gradio –∫–ª–∏–µ–Ω—Ç](#gradio-–∫–ª–∏–µ–Ω—Ç) - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–æ–≤](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-jwt-—Ç–æ–∫–µ–Ω–æ–≤) - –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
3. [–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î](#–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è-–±–¥) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

## ü§ñ Gradio –∫–ª–∏–µ–Ω—Ç

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Personal AI Platform**

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r scripts/requirements-gradio.txt

# 2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å JWT —Ç–æ–∫–µ–Ω
python scripts/generate_test_jwt.py

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Gradio –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
python scripts/gradio_client.py
```

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: **http://localhost:7860**

### –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, —É–¥–∞–ª–µ–Ω–∏–µ
- ‚úÖ **–ß–∞—Ç-—Å–µ—Å—Å–∏–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ **–ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤**: –æ–±—Ö–æ–¥ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ **SSE —Å–æ–±—ã—Ç–∏—è**: real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞**: –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: [`scripts/GRADIO_CLIENT.md`](GRADIO_CLIENT.md)

---

## üîê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT —Ç–æ–∫–µ–Ω–æ–≤

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω —Å —Å–ª—É—á–∞–π–Ω—ã–º user_id (—Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 30 –º–∏–Ω—É—Ç)
uv run python scripts/generate_test_jwt.py

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω —Å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–æ–π payload
uv run python scripts/generate_test_jwt.py --decode

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω (24 —á–∞—Å–∞)
uv run python scripts/generate_test_jwt.py --expire 1440 --decode
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|----------|----------|--------|
| `--user-id` | UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `--user-id 123e4567-e89b-12d3-a456-426614174000` |
| `--expire` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞ (–º–∏–Ω—É—Ç—ã) | `--expire 60` |
| `--decode` | –ü–æ–∫–∞–∑–∞—Ç—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π payload | `--decode` |

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 1. –¢–æ–∫–µ–Ω –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
uv run python scripts/generate_test_jwt.py \
  --user-id 123e4567-e89b-12d3-a456-426614174000 \
  --expire 60 \
  --decode
```

#### 2. –î–æ–ª–≥–æ–∂–∏–≤—É—â–∏–π —Ç–æ–∫–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# –¢–æ–∫–µ–Ω –Ω–∞ 7 –¥–Ω–µ–π
uv run python scripts/generate_test_jwt.py --expire 10080
```

#### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Swagger UI

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
   ```bash
   uv run python scripts/generate_test_jwt.py --decode
   ```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

3. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8000/docs

4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Authorize"** üîì

5. –í—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–∫–µ–Ω (–ë–ï–ó –ø—Ä–µ—Ñ–∏–∫—Å–∞ "Bearer")

6. –ù–∞–∂–º–∏—Ç–µ **"Authorize"**

#### 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ curl

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
TOKEN=$(uv run python scripts/generate_test_jwt.py | grep "eyJ" | head -1)

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
curl -X GET "http://localhost:8000/my/agents/" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json"
```

#### 5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Python

```python
import subprocess

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞
result = subprocess.run(
    ["uv", "run", "python", "scripts/generate_test_jwt.py"],
    capture_output=True,
    text=True
)

# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –∏–∑ –≤—ã–≤–æ–¥–∞
for line in result.stdout.split('\n'):
    if line.startswith('eyJ'):
        token = line.strip()
        break

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ httpx
import httpx

headers = {"Authorization": f"Bearer {token}"}
response = httpx.get("http://localhost:8000/my/agents/", headers=headers)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–∫–µ–Ω–∞

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JWT —Ç–æ–∫–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ claims:

```json
{
  "sub": "1cd8d196-4d6d-4a51-a0d5-87614dfa1c06",  // user_id (UUID)
  "iat": 1770816880,                               // issued at (timestamp)
  "exp": 1770903280                                // expiration (timestamp)
}
```

- **sub** - Subject (user_id –≤ —Ñ–æ—Ä–º–∞—Ç–µ UUID)
- **iat** - Issued At (–≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞)
- **exp** - Expiration (–≤—Ä–µ–º—è –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ JWT

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã JWT –±–µ—Ä—É—Ç—Å—è –∏–∑ [`app/config.py`](../app/config.py):

- `jwt_secret_key` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "your-secret-key-change-in-production")
- `jwt_algorithm` - –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ–¥–ø–∏—Å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "HS256")
- `jwt_access_token_expire_minutes` - –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30 –º–∏–Ω—É—Ç)

### Troubleshooting

**–û—à–∏–±–∫–∞: ModuleNotFoundError**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ uv run
uv run python scripts/generate_test_jwt.py
```

**–û—à–∏–±–∫–∞: Invalid UUID format**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç UUID
uv run python scripts/generate_test_jwt.py --user-id 123e4567-e89b-12d3-a456-426614174000
```

**–¢–æ–∫–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ API**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫
uv run python scripts/generate_test_jwt.py --decode --expire 1440

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –≤ .env
```
