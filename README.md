# CodeLab Core Service

–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è AI –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ - –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å

## –û–±–∑–æ—Ä

–ü–æ–ª–Ω–æ—Å—Ç—å—é –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è AI –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–≤—É–º—è —Ä–µ–∂–∏–º–∞–º–∏ —Ä–∞–±–æ—Ç—ã (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π + –ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤). –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é AI –∫–æ–º–∞–Ω–¥—É —Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏, —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç—å—é –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **100% –∏–∑–æ–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤, –Ω–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã**:
  - üß† **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π** - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –≥—Ä–∞—Ñ –∑–∞–¥–∞—á –∏ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç –∞–≥–µ–Ω—Ç–æ–≤
  - ‚ö° **–ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `@agent_name` (1-2 —Å–µ–∫)
- **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–º—è—Ç—å** - –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π Qdrant –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å 1M+ –≤–µ–∫—Ç–æ—Ä–æ–≤ –¥–ª—è RAG
- **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** - SSE —Å–æ–±—ã—Ç–∏—è –¥–ª—è –º–≥–Ω–æ–≤–µ–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π UI
- **–ö–æ–Ω—Ç—Ä–æ–ª—å –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è** - Approval Manager –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –æ–ø–∞—Å–Ω—ã–µ tools –∏ –ø–ª–∞–Ω—ã –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Runtime:** Python 3.12+ (async/await)
- **–ú–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤:** uv
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** FastAPI
- **ORM:** SQLAlchemy 2.0 + asyncpg
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** Pydantic 2.0
- **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL, Redis, Qdrant
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ruff (linter/formatter), mypy (type checker), pytest

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- Docker & Docker Compose
- uv –º–µ–Ω–µ–¥–∂–µ—Ä –ø–∞–∫–µ—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- make (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É–¥–æ–±–Ω—ã—Ö –∫–æ–º–∞–Ω–¥)

### –í–∞—Ä–∏–∞–Ω—Ç 0: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π)

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `make`:

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd codelab-core-service

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
make setup

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ OPENAI_API_KEY
nano .env

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
make restart
```

–ì–æ—Ç–æ–≤–æ! API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8000

–í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
make help
```

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ó–∞–ø—É—Å–∫ —Å Docker Compose (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–≠—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç —Å–æ –≤—Å–µ–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd codelab-core-service
```

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
cp .env.example .env
```

3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ:
OPENAI_API_KEY=sk-your-openai-api-key
JWT_SECRET_KEY=your-secret-key-change-in-production
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã):**
```bash
docker-compose -f docker-compose.dev.yml up -d
```

**–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ (—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º):**
```bash
docker-compose up -d
```

5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:
```bash
docker-compose ps
```

6. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
```bash
docker-compose logs -f app
```

–°–µ—Ä–≤–∏—Å—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- **API**: http://localhost:8000
- **API Docs**: http://localhost:8000/my/docs
- **Health Check**: http://localhost:8000/health
- **PostgreSQL**: localhost:5432
- **Redis**: localhost:6379
- **Qdrant**: http://localhost:6333
- **Prometheus**: http://localhost:9090 (—Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–Ω–æ–º —Å—Ç–µ–∫–µ)
- **Grafana**: http://localhost:3000 (—Ç–æ–ª—å–∫–æ –≤ –ø–æ–ª–Ω–æ–º —Å—Ç–µ–∫–µ, admin/admin)

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å hot-reload –∏ –æ—Ç–ª–∞–¥–∫–æ–π.

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uv (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
git clone <repository-url>
cd codelab-core-service
uv pip install -e .
```

3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ `.env`:
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ OPENAI_API_KEY –∏ JWT_SECRET_KEY
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:
```bash
docker-compose -f docker-compose.dev.yml up -d postgres redis qdrant
```

5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
alembic upgrade head
```

6. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ seed data (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
```bash
python scripts/init_db.py seed
```

7. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ:
```bash
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8000

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health endpoint:
```bash
curl http://localhost:8000/health
```

2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π JWT —Ç–æ–∫–µ–Ω:
```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ ID —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ seed data
python scripts/generate_test_jwt.py <user_id>
```

3. –°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–µ–≥–æ –ø–µ—Ä–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞:
```bash
curl -X POST http://localhost:8000/my/agents/ \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "assistant",
    "system_prompt": "You are a helpful AI assistant.",
    "model": "gpt-4-turbo-preview",
    "tools": [],
    "concurrency_limit": 3
  }'
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:**
```bash
alembic upgrade head
```

**–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é:**
```bash
alembic revision --autogenerate -m "–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
```

**–û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é:**
```bash
alembic downgrade -1
```

**–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å seed data:**
```bash
python scripts/init_db.py init
```

**–¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å seed data:**
```bash
python scripts/init_db.py seed
```

**–°–±—Ä–æ—Å–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–û–°–¢–û–†–û–ñ–ù–û!):**
```bash
python scripts/init_db.py reset
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

**–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:**
```bash
docker-compose down
```

**–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å volumes (—É–¥–∞–ª–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ):**
```bash
docker-compose down -v
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –ø–æ—Å–µ—Ç–∏—Ç–µ:
- Swagger UI: `http://localhost:8000/my/docs`
- OpenAPI JSON: `http://localhost:8000/my/openapi.json`

### –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

- [üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ –∑–∞–ø—É—Å–∫—É](doc/setup-guide.md) - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º
- [üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å LiteLLM](doc/litellm-integration.md) - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ LLM –ø—Ä–æ–∫—Å–∏ –≤–º–µ—Å—Ç–æ OpenAI API
- [üé® Gradio UI –∫–ª–∏–µ–Ω—Ç](scripts/GRADIO_CLIENT.md) - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API
- [üîß REST API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](doc/rest-api.md) - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
- [üì° SSE Event Streaming](doc/sse-event-streaming.md) - –†–∞–±–æ—Ç–∞ —Å —Å–æ–±—ã—Ç–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- [üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](tests/README.md) - –ó–∞–ø—É—Å–∫ –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
codelab-core-service/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ agents/              # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏ + ContextualAgent
‚îÇ   ‚îú‚îÄ‚îÄ core/                # Agent Bus, Orchestrator, Approval Manager
‚îÇ   ‚îú‚îÄ‚îÄ middleware/          # Middleware –∏–∑–æ–ª—è—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ models/              # SQLAlchemy ORM –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ routes/              # FastAPI endpoints
‚îÇ   ‚îú‚îÄ‚îÄ schemas/             # Pydantic –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ vectorstore/         # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Qdrant
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ redis_client.py      # Redis –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ qdrant_client.py     # Qdrant –∫–ª–∏–µ–Ω—Ç
‚îú‚îÄ‚îÄ migrations/              # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ tests/                   # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docker-compose.yml       # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile               # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ pyproject.toml           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ README.md                # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞:
```bash
ruff format .
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞:
```bash
ruff check .
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤:
```bash
mypy app/
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
pytest
```

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º:
```bash
pytest --cov=app --cov-report=html
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
alembic revision --autogenerate -m "–æ–ø–∏—Å–∞–Ω–∏–µ"
```

–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
alembic upgrade head
```

–û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
alembic downgrade -1
```

## –ü—Ä–∏–º–µ—Ä—ã API

### –°–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

```bash
curl -X POST http://localhost:8000/my/agents/ \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "coder",
    "system_prompt": "–í—ã —ç–∫—Å–ø–µ—Ä—Ç Python —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫...",
    "model": "gpt-4-turbo-preview",
    "tools": ["code_executor", "file_reader"],
    "concurrency_limit": 3
  }'
```

### –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Ç-—Å–µ—Å—Å–∏–∏

```bash
curl -X POST http://localhost:8000/my/chat/sessions/ \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (–ø—Ä—è–º–æ–π —Ä–µ–∂–∏–º)

```bash
curl -X POST http://localhost:8000/my/chat/{session_id}/message/ \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "–ò—Å–ø—Ä–∞–≤—å –±–∞–≥ –≤ auth.py",
    "target_agent": "coder"
  }'
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Prometheus: `http://localhost:9090`
- Grafana: `http://localhost:3000` (admin/admin)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- **–ò–∑–æ–ª—è—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - Middleware-based –∏–∑–æ–ª—è—Ü–∏—è –Ω–∞ –≤—Å–µ—Ö `/my/*` endpoints
- **Per-Agent –∫–æ–Ω—Ç–µ–∫—Å—Ç** - –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–≤–æ—é Qdrant –∫–æ–ª–ª–µ–∫—Ü–∏—é
- **Agent Bus** - asyncio.Queue –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –∑–∞–¥–∞—á
- **–î–≤–∞ —Ä–µ–∂–∏–º–∞ —á–∞—Ç–∞** - –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –æ–±—Ö–æ–¥—è—Ç –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏

## –õ–∏—Ü–µ–Ω–∑–∏—è

–°–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –°–æ–∑–¥–∞–π—Ç–µ feature –≤–µ—Ç–∫—É
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –∏ –ª–∏–Ω—Ç–∏–Ω–≥
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ pull request

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ–±–ª–µ–º, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub.
